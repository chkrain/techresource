<!-- main/templates/main/index.html -->
{% extends 'main/base.html' %}

{% block content %}
<h2>Добро пожаловать!</h2>
<p>Мы предоставляем широкий спектр инженерных услуг и оборудования.</p>

<div class="services">
    <div class="service-card">
        <h3>Проектирование</h3>
        <p>Разработка технической документации и проектных решений</p>
    </div>
    <div class="service-card">
        <h3>Поставка оборудования</h3>
        <p>Качественное оборудование от проверенных производителей</p>
    </div>
    <div class="service-card">
        <h3>Техническая поддержка</h3>
        <p>Круглосуточная поддержка и консультации</p>
    </div>
</div>

<!-- Популярные товары на главной -->
{% if featured_products %}
<div class="featured-products">
    <h2 style="margin-top: 3rem;">Популярные товары</h2>
    <div class="products-preview">
        {% for product in featured_products %}
        <div class="product-preview-card">
            {% if product.image %}
            <div class="product-image">
                <img src="{{ product.image.url }}" alt="{{ product.name }}">
            </div>
            {% else %}
            <div class="product-image">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='150' viewBox='0 0 250 150'%3E%3Crect width='250' height='150' fill='%23f8f9fa'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='14' fill='%236c757d'%3E⚙️ Нет изображения%3C/text%3E%3C/svg%3E" alt="{{ product.name }}">
            </div>
            {% endif %}
            <div class="product-info">
                <h3>{{ product.name }}</h3>
                <p class="price">{{ product.price }} руб.</p>
                <p class="quantity {% if product.quantity > 0 %}in-stock{% else %}out-of-stock{% endif %}">
                    {% if product.quantity > 0 %}В наличии{% else %}Нет в наличии{% endif %}
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
    <div style="text-align: center; margin-top: 1rem;">
        <a href="{% url 'products' %}" class="view-all-btn">Все товары</a>
    </div>
</div>

<style>
.products-preview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 1rem;
}

.product-preview-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    overflow: hidden;
}

.product-preview-card .product-image {
    height: 150px;
    overflow: hidden;
}

.product-preview-card .product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.product-preview-card .product-info {
    padding: 1rem;
}

.product-preview-card h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1rem;
}

.view-all-btn {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    background: #2c3e50;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    transition: background 0.2s;
}

.view-all-btn:hover {
    background: #34495e;
}
</style>
{% endif %}
{% endblock %}